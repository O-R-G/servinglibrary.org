<?php 
require_once("_Library/displayMedia.php"); 
require_once("GLOBAL/head.php"); 
?>


	<!-- MAIN -->

<?php

	$html   = "\n	<div class = 'mainContainer'>";	

	// BoTSL #9
	
	$openDate = "2015-02-01";	
	$closeDate = "2015-07-15";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as 
objectsRank, wires.fromid, wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM 
objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND objects.name1 
NOT LIKE '.%' AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND 
media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue9'>"; 
		$html .= "\n <a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #8
	
	$openDate = "2014-09-01";	
	$closeDate = "2015-01-31";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, 
objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, wires.active, media.id AS mediaId, 
media.object, media.type, media.caption, media.active, media.rank FROM objects, wires, media WHERE 
wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND 
objects.name1 NOT LIKE '.%' AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND 
objects.active='1' AND wires.active='1' AND media.active='1' AND objects.created > '$openDate' AND 
objects.created < '$closeDate' ORDER BY RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue8'>"; 
		$html .= "\n <a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #7
	
	$openDate = "2014-02-01";	
	$closeDate = "2014-08-31";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, 
objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, 
wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, 
media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE 
objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND 
media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND 
media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY 
RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue7'>"; 
		$html .= "\n <a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #6
	
	$openDate = "2013-07-01";	
	$closeDate = "2014-1-31";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, 
objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, 
wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, 
media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE 
objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND 
media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND 
media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY 
RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue6'>"; 
		$html .= "\n <a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #5
	
	$openDate = "2013-01-01";
	$closeDate = "2013-06-30";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as objectsRank, wires.fromid, 
wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT 
objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND 
objects.active='1' AND wires.active='1' AND media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	

		$html  .= "\n	<div class='thumbsContainer issue5'>";
		$html  .= "\n		<a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";

		if ( $id == "77066" && !$isMobile) {

                	// G-e-s-t-a-l-t exception

			$html  .= "\n			<script>var thisW = 220; var thisH = 313;</script>";
			$html  .= "\n                            <canvas data-processing-sources='../_Processing/G-e-s-t-a-l-t.pde' width='220' height='313'></canvas>";

		} else {

			$html  .= "\n				". displayMedia($mediaFile, null, $style);
		}

		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html .= "\n <div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #4
	
	$openDate = "2012-07-01";	
	$closeDate = "2012-12-31";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, 
objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, 
wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, 
media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects 
WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND 
media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND 
media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER 
BY RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue4'>";
		$html  .= "\n		<a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  


	// BoTSL #3
	
	$openDate = "2012-01-01";
	$closeDate = "2012-06-30";

	$sql    = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY RAND();";
	$result =  MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue3'>";
		$html  .= "\n		<a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  
	
	// BoTSL #2
	
	$openDate = "2011-06-01";
	$closeDate = "2011-12-31";

	$sql    = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY RAND();";
	$result =  MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue2'>";
		$html  .= "\n		<a href='read.html?id=$id' border='0'>";				
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  

	// BoTSL #1
	
	$openDate = "2011-01-01";
	$closeDate = "2011-06-01";

	$sql    = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as objectsRank, wires.fromid, wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND media.active='1' AND objects.created > '$openDate' AND objects.created < '$closeDate' ORDER BY RAND();";
	$result =  MYSQL_QUERY($sql);
				
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue1'>";
		$html  .= "\n		<a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";

		$html  .= "\n	</div>";
	}
				
	$html  .= "\n	<div class = 'dividerContainer caption'>&nbsp;</div>";	  

	// BoTSL #0
	
	// bracewell / hirst exception

	$openDate = "2009-10-21";	
	$closeDate = "2009-10-23";

	$sql = "SELECT objects.id AS objectsId, objects.name1, objects.body, objects.deck, objects.active, objects.created, objects.rank as objectsRank, 
objects.begin, wires.fromid, wires.toid, wires.active, media.id AS mediaId, media.object, media.type, media.caption, media.active, media.rank FROM 
objects, wires, media WHERE wires.fromid=(SELECT objects.id FROM objects WHERE objects.name1 LIKE 'Library' AND objects.active='1') AND objects.name1 NOT 
LIKE '.%' AND wires.toid = objects.id AND media.object=wires.toid AND media.type='jpg' AND objects.active='1' AND wires.active='1' AND media.active='1' 
AND objects.begin > '$openDate' AND objects.end < '$closeDate' ORDER BY RAND();";
	$result = MYSQL_QUERY($sql);
		
	while ( $myrow  =  MYSQL_FETCH_ARRAY($result) ) {
	
		$title = strtoupper($myrow["name1"]);
		$author = $myrow["deck"];
		$rank = $myrow["objectsRank"];
		$id = $myrow[objectsId];
		$mediaId = $myrow["mediaId"];
		$type = $myrow["type"];
		$mediaFile = "MEDIA/". STR_PAD($mediaId, 5, "0", STR_PAD_LEFT) .".". $type;	
		$style 	= "width:100%";	
		
		$html  .= "\n	<div class='thumbsContainer issue0'>"; 
		$html .= "\n <a href='read.html?id=$id' border='0'>";
		$html  .= "\n			<div class='coverContainer'>";
		$html  .= "\n				". displayMedia($mediaFile, null, $style);
		$html  .= "\n			</div>";
		$html  .= "\n		</a>";
		// $html  .= "\n		<div class='captionContainer caption'>". $rank . ": " . $title . "</div>";
		$html  .= "\n		<div class='captionContainer caption'>". $author . ": " . $title . "</div>";
		$html  .= "\n	</div>";
	}
	
	$html  .= "\n	</div>";
	
	echo $html;
?>

<?php
require_once("GLOBAL/foot.php"); 
?>
